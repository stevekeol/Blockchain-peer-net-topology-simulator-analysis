# 草稿

### 功能
+ 核心流程:以时间戳排序的消息队列(即日志队列)，(以自定义的速率或过滤条件)构建动态的数据面板，该数据面板的变动驱动了页面对节点网路拓扑图的渲染
+ 支持: 节点状态的可视化显示(节点负载-颜色，节点度数-大小，)
+ 支持: 节点的动态连接断开过程
+ 支持: 鼠标悬浮时，节点状态数据的显示
+ 支持: 读取数据文件和保存数据文件；原始日志存储，过滤条件后的日志存储(不能直接存储数据面板,因为要体现状态更改的过程)。用于复现局部的效果。
+ 支持: 业务数据实时构建过程(websocket/socketio)

### 思路
> 用React+Typescript写一个全新的框架，思路参考肇丰的;
+ 节点的属性/方法定义
+ 

### 一些参考
+ RxJS: 
  + [特性](https://cn.rx.js.org/manual/overview.html)
  + [源码](https://github.com/ReactiveX/RxJS)
+ @AntV/g6.js: 前端图可视化引擎
  + [g6官网](https://g6.antv.vision/zh/)
  + [g6在React中的应用](https://github.com/baizn/g6-in-react)
  + [使用教程](https://www.yuque.com/antv/g6/intro)
  + [图分析等](https://www.yuque.com/antv/g6/fvuhbz#Zq6cA)
  + [图算法等](https://www.yuque.com/antv/g6/fvuhbz#jEYP4)

### DONE
+ [√] 搭建项目模板
+ [×] 精简代码，实现: 节点创建，数据面板的即时更新，节点建立连接，节点扫描，导入(?)等功能
+ [√] 节点基本布局图的渲染
+ [√] 节点被选中时高亮
+ [√] 节点处于活跃状态时的呼吸效果(暂时妥协为scale-animetion动效)
+ [√] 节点选中时，相关联边的状态更改
+ [√] 整个应用样式(背景渐变+节点默认样式)的简单调整
+ [√] 增加节点和边的简单tooltips
+ [x] 不用写死的数据，还是动态生成
+ [√] 增加webWorker，尽量渲染线程的阻塞
+ [√, x] hover节点时，高亮显示关联节点和连线(造成Bug: clicked的节点被一同cover掉了)
+ [x] 修复`click-select`模式被关联节点样式覆盖的bug
+ [√] 调整应用整体布局，新增`节点状态详情实时展示区`和`操作面板区`空壳
+ [√] 代码重构: 功能函数统一暴露, 三个分区放在同一个组件内
+ [√] 增加`节点状态详情实时展示区`
+ [] 增加`操作面板区`
+ [] 文件导入数据, 并提供给全局
+ [x] 实现动态数据驱动视图的动态渲染
+ [×] 自己搭建一个nodejs+socketIO的实时数据源吧, 墨迹
+ [] 实时来的数据task，需要本地持久化
+ [√] 图表绘制: X-连接占比, Y-节点数量(连接占比分布图)
+ [√] 图表绘制: X-时间戳, Y-网络性能
+ [] 节点网络性能评估的调研和建模
+ [√] 网络性能实时趋势图，并修复线条每次重新绘制的bug
+ [] charts全部替换成[React官方版本](https://charts.ant.design/)
+ [] 日志回放速率的控制思路: `useInterval()` 控制速率和暂停
+ [] 模拟节点生成: 
+ [] 鼠标hover节点或边，获取其数据
+ [] 移除某个边的操作


### TODO
+ [] 节点hover状态的图表化显示;
+ [] 实时/回放模式下，全局背景色和按钮背景色的切换
+ [] 拓扑图可全局?
+ [] 要维护一个日志item的消息队列吧，特别是实时模式下，且需要本地持久化;
+ [] 某个节点在某个时间窗口/全部时间内的连接占比曲线图；

### Note
+ [√] 全局数据源，统一维护在节点/连线关系图的数据上，以使数据源唯一
+ [] DIHT中其实是没有节点创建的事件的，因为节点创建仅仅是某个角落中节点的一个创建而已，只有当发起一个连接事件，节点网络中才能感知到该节点的存在;

### Bug
+ [] 新创建的节点，总是在canvas的左上角